<!DOCTYPE html><html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Painel Profissional de FIIs</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f6f8; margin:0; }
    header { background:#1f2933; color:#fff; padding:20px; text-align:center; }
    table { width:98%; margin:20px auto; border-collapse:collapse; background:#fff; }
    th, td { padding:8px; border-bottom:1px solid #ddd; text-align:center; font-size:14px; }
    th { background:#111827; color:#fff; }
    input { width:70px; padding:4px; text-align:center; }
    button { padding:8px 14px; cursor:pointer; margin:5px; }
    .good { color:green; font-weight:bold; }
    .total { font-weight:bold; background:#f1f5f9; }
  </style>
</head>
<body><header>
  <h1>Painel Profissional da Carteira de FIIs</h1>
  <p>Controle de cotas, compras, vendas, dividendos e projeÃ§Ãµes</p>
</header><table>
  <thead>
    <tr>
      <th>FII</th>
      <th>Cotas</th>
      <th>Comprar (+)</th>
      <th>Vender (-)</th>
      <th>Div. por cota (Ãºlt. mÃªs)</th>
      <th>Rend. MÃªs (R$)</th>
      <th>Yield Mensal</th>
      <th>SaÃºde</th>
    </tr>
  </thead>
  <tbody id="table-body"></tbody>
  <tfoot>
    <tr class="total">
      <td>Total</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td id="totalRend">R$ 0,00</td>
      <td id="totalYield">0%</td>
      <td>-</td>
    </tr>
  </tfoot>
</table><div style="text-align:center; margin-bottom:20px;">
  <button onclick="saveData()">ðŸ’¾ Salvar</button>
  <button onclick="exportData()">ðŸ“¤ Exportar</button>
  <button onclick="importData()">ðŸ“¥ Importar</button>
</div><script>
const fiis = [
  { code: 'KNCA11', price: 100, health: 'Boa' },
  { code: 'KNCS11', price: 100, health: 'Boa' },
  { code: 'KNCR11', price: 100, health: 'Excelente' },
  { code: 'HGLG11', price: 160, health: 'Excelente' },
  { code: 'MXRF11', price: 10,  health: 'Boa' },
  { code: 'XPML11', price: 100, health: 'Boa' },
  { code: 'RBRR11', price: 100, health: 'Boa' }
];

function load() {
  return JSON.parse(localStorage.getItem('fiiData')) || {};
}

function saveData() {
  const data = {};
  document.querySelectorAll('tr[data-code]').forEach(row => {
    const code = row.dataset.code;
    data[code] = {
      cotas: Number(row.querySelector('.cotas').value),
      div: Number(row.querySelector('.div').value)
    };
  });
  localStorage.setItem('fiiData', JSON.stringify(data));
  alert('Dados salvos com sucesso');
}

function render() {
  const saved = load();
  const tbody = document.getElementById('table-body');
  tbody.innerHTML = '';

  let totalRend = 0;
  let invested = 0;

  fiis.forEach(f => {
    const s = saved[f.code] || { cotas: 0, div: 0 };
    const rend = s.cotas * s.div;
    const yieldM = f.price ? (s.div / f.price * 100) : 0;

    totalRend += rend;
    invested += s.cotas * f.price;

    const tr = document.createElement('tr');
    tr.dataset.code = f.code;
    tr.innerHTML = `
      <td>${f.code}</td>
      <td><input class="cotas" type="number" value="${s.cotas}" readonly></td>
      <td><input type="number" min="0" onchange="addCotas('${f.code}', this.value)"></td>
      <td><input type="number" min="0" onchange="sellCotas('${f.code}', this.value)"></td>
      <td>R$ <input class="div" type="number" step="0.01" value="${s.div}" onchange="render()"></td>
      <td>R$ ${rend.toFixed(2)}</td>
      <td>${yieldM.toFixed(2)}%</td>
      <td class="good">${f.health}</td>
    `;
    tbody.appendChild(tr);
  });

  const totalYield = invested ? (totalRend / invested * 100) : 0;

  document.getElementById('totalRend').innerText = `R$ ${totalRend.toFixed(2)}`;
  document.getElementById('totalYield').innerText = `${totalYield.toFixed(2)}%`;
}

function addCotas(code, qty) {
  qty = Number(qty);
  if (!qty) return;
  const data = load();
  data[code] = data[code] || { cotas: 0, div: 0 };
  data[code].cotas += qty;
  localStorage.setItem('fiiData', JSON.stringify(data));
  render();
}

function sellCotas(code, qty) {
  qty = Number(qty);
  if (!qty) return;
  const data = load();
  data[code] = data[code] || { cotas: 0, div: 0 };
  data[code].cotas = Math.max(0, data[code].cotas - qty);
  localStorage.setItem('fiiData', JSON.stringify(data));
  render();
}

function exportData() {
  const data = localStorage.getItem('fiiData');
  prompt('Copie seus dados:', data);
}

function importData() {
  const txt = prompt('Cole os dados exportados:');
  if (!txt) return;
  localStorage.setItem('fiiData', txt);
  render();
}

render();
</script></body>
</html>
